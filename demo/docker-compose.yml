version: '3.6'
services:
  zapsidatabase:
    networks:
      - zapsi
    container_name: zapsidatabase
    image: 'petrjahoda/zapsidatabase:latest'
    logging:
      driver: json-file
      options:
        max-size: 5m
        max-file: '10'
    volumes:
      - 'zapsidb:/var/lib/mysql'
      - 'zapsidblogs:/var/log/mysql'
    ports:
      - '3306:3306'
    restart: always
    environment: []
  stateserver:
    networks:
      - zapsi
    container_name: stateservercore
    image: 'petrjahoda/stateservercore:latest'
    logging:
      driver: json-file
      options:
        max-size: 5m
        max-file: '10'
    depends_on:
      - zapsidatabase
    restart: always
  terminalserver:
    networks:
      - zapsi
    container_name: terminalservercore
    image: 'petrjahoda/terminalservercore:latest'
    logging:
      driver: json-file
      options:
        max-size: 5m
        max-file: '10'
    depends_on:
      - zapsidatabase
    restart: always
  zapsiserver:
    networks:
      - zapsi
    container_name: zapsiservercore
    image: 'petrjahoda/zapsiservercore:latest'
    logging:
      driver: json-file
      options:
        max-size: 5m
        max-file: '10'
    depends_on:
      - zapsidatabase
    restart: always
  zapsiweb:
    networks:
      - zapsi
    container_name: zapsiweb
    image: 'petrjahoda/zapsiweb:latest'
    logging:
      driver: json-file
      options:
        max-size: 5m
        max-file: '10'
    ports:
      - '80:80'
    volumes:
      - 'zapsiweb:/var'
    restart: always
  terminalweb:
    networks:
      - zapsi
    container_name: terminalweb
    image: 'petrjahoda/terminalweb:latest'
    logging:
      driver: json-file
      options:
        max-size: 5m
        max-file: '10'
    ports:
      - '81:80'
    volumes:
      - 'terminalweb:/var'
    restart: always    
volumes:
  zapsidb: null
  zapsidblogs: null
  zapsiweb: null
  terminalweb: null
networks:
  zapsi: null
